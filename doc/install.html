<html><head>
<title>Boodler: Installation</title>
</head>
<body>

<h2>Boodler: Installation</h2>

Boodler does not, as yet, have a formal installation procedure.
The source archive (boodler.tar.gz) unpacks into a single directory
tree; it is simplest to run Boodler from there.
<p>

<h3>Prerequisites</h3>

Boodler is written in Python; you must have a Python interpreter installed
on your system in order to run it. (Python version 1.5.2 is required.
Later versions of Python should work as well.)
<p>

Boodler can be built to use either the OSS sound driver interface, the
ALSA sound driver interface, or the ESD (EsounD) sound server library.
(On MacOSX, it can use the standard CoreAudio interface or the OSX port
of ESD.)
It can also write raw sound output to a file.
<p>

<h3>The contents of the archive</h3>

If you list the source directory, you will see the following arrangement:

<dl>
<dt>./configure.py
<dd>A script which configures the Boodler source to compile on your machine.
<dt>./boodler.py
<dd>The Boodler program itself. This Python script starts up the Boodler
engine.
<dt>./boomsg.py
<dd>A simple script for sending network events to Boodler.
<dt>./boodle/*.py
<dd>The <code>boodle</code> Python package. This contains several Python
modules which are used by Boodler.
<dt>./cboodle/*.c
<dd>The C source for the <code>boodle.cboodle</code> module. This
module performs the resampling, linear interpolation, and mixing operations
which are at the heart of Boodler. It is written in C for efficiency.
<dt>./effects/*.py
<dd>The sound effects. Each Python module in this directory contains one
or more <code>Agent</code> classes; each <code>Agent</code> class creates
and controls an individual soundscape. When you start up Boodler, you select
an <code>Agent</code> to run. 
(Note that this is a directory full of Python modules,
but it is not a true Python package -- it lacks an <code>__init__.py</code>
module.)
<dt>./doc/*.html
<dd>This documentation.
</dl>

You will also need the Boodler sound library, which is available as a
separate download (boodler-snd.tar.gz).
<p>

<h3>Setting up your environment</h3>

Download and uncompress the source archive and the sound library.
(For example's sake, let us say that these are in
<code>/home/zarf/src/boodler</code>
and
<code>/home/zarf/lib/boodler-snd</code>
respectively.)
<p>

Boodler requires two environment variables to be set:

<dl>

<dt><code>BOODLER_SOUND_PATH</code>
<dd>The directory containing the Boodler sound library.
(<code>/home/zarf/lib/boodler-snd</code>, for example.)

<dt><code>BOODLER_EFFECTS_PATH</code>
<dd>The directory containing the Boodler sound effect modules.
(<code>/home/zarf/src/boodler/effects</code>, for example.)
</dl>

Either of these variables can also be given as a colon-separated list
of directories, if you want to search in several places for either
sounds or sound effects.
<p>

You will also need to have the <code>boodle</code> package in your
Python path. The easiest way to do this is simply to cd to the
source directory (<code>/home/zarf/src/boodler</code>) -- Python
is always willing to load packages from the current directory.
If you wish to run Boodler while in another directory, you can
add the source directory to your <code>PYTHONPATH</code>.
<p>

<h3>Building Boodler</h3>

<ol>
<li>
Type <em>python configure.py</em>.
<p>

(This tries to figure out the configuration of your system, and sets up
Boodler to compile properly.)
<p>

<li>
Type <em>make</em>.
<p>

(This compiles the C source code for <code>boodle.cboodle</code>,
and copies the resulting module library to the <code>./boodle</code>
directory.)
<p>

</ol>

<h3>Testing Boodler out</h3>

Try this command:

<pre>
python boodler.py play.OneSound pure/stereotest.aiff
</pre>

You should hear a seven-note series of test tones -- first alternating
between left and right channels, and then playing in both.
<p>

You can now begin <a href="use.html">using Boodler</a>.
<p>

<h3>If it doesn't work</h3>

<ul>

<li>The <code>configure.py</code> program complains that none of
Boodler's sound drivers are compatible.

<ul>
<li>
Boodler currently recognizes five different interfaces to a machine's
sound hardware:

<ul>

<li>OSS (the Open Sound System)
is a low-level sound driver. If you build Boodler to use OSS, it
will monopolize the sound hardware -- no other sound-producing program
will be able to run.

<li>ALSA (the Advanced Linux Sound Architecture) is a more modern and
powerful sound driver. As with OSS, only one ALSA program can use the
sound hardware at a time. (ALSA is designed to emulate OSS, so if your
machine has ALSA installed, you can probably build Boodler using
either the OSS or ALSA interfaces.)

<li>ESD (EsounD, the "Enlightened Sound Daemon") 
is a more flexible system. Many programs can use the ESD sound
interface on your computer at the same time. However, the ESD form of
Boodler will use somewhat more CPU time. (Also, ESD is kind of junky and
unsupported. I never liked it much.)

<li>MACOSX (MacOSX CoreAudio)
uses the CoreAudio framework. This is the
configuration you will likely want under MacOSX. (Although ESD should
also work, if you're running the MacOSX port of ESD.)

<li>FILE 
is an interface that does not play sounds at all. Instead, it writes raw
sound data to a file on disk. This may be useful. (I used it to generate
the Boodler samples on the web site.)

</ul>

You can select one or the other by typing
<code>python configure.py --driver alsa</code>,
et cetera.
To see which of them your computer supports, type
<code>python configure.py --list</code>.

<li>
If your sound interface header files or libraries are in a
non-standard location, you will have to configure Boodler to 
find them. Type
<code>python configure.py --help</code>
for details.

</ul>

<li>
You're trying to build Boodler (with the <code>make</code> command),
and you see the error "Python.h: No such file or directory".

<ul>
<li>Probably you don't have the Python development package installed on
your machine. This is the set of include files needed to compile C
modules for Python. 
<li>If your OS uses RPM packages (Red Hat format),
find the "python-devel" RPM package; if you use some other installation
system, the name will be something similar. Make sure you get the headers
that match your version of Python.
<li>On MacOSX, you can either install Python via
<a href="http://fink.sourceforge.net/">Fink</a>,
or download the Python source and build it yourself.
</ul>

<li>
The script aborts with the exception 
"ImportError: No module named cboodle".

<ul>
<li>
The <code>boodle.cboodle</code> module does not exist. Did you forget
to <em>make</em>?
</ul>

<li>
The script aborts with the exception
"IOError: unable to initialize audio device".

<ul>
<li>
The <code>boodle.cboodle</code> module was unable to open the sound
device. The first line of the error message will have a more specific
explanation.
</ul>

<li>
Boodler cannot initialize the audio device because 
<code>/dev/dsp</code> is not found.

<ul>
<li>
You may have your sound device installed
in a different location. You can use the <code>--device</code> argument
to indicate the correct location:

<pre>
python boodler.py --device /dev/whatever play.OneSound pure/stereotest.aiff
</pre>
</ul>

<li>
Boodler appears to hang forever, never producing any sound.

<ul>
<li>Some other
program may be using the sound device. 
<li>
When Boodler is built using the OSS or ALSA interfaces, it is a greedy beast
and insists on monopolizing the sound device itself, the entire time
it is running. 
When Boodler is built using ESD, it is willing to share with other
ESD programs, but it is still possible for some other program to 
hog the device and prevent ESD from starting up.
</ul>

<li>
Boodler runs for a few seconds and then stops,
but you hear no sound.
(The stereotest sound is 2.8 seconds long.)

<ul>
<li>
You need to mess around with your speakers,
headphones, cables, or some other irritating piece of the real world.
</ul>

<li>
Most soundscapes skip or sound choppy.

<ul>
<li>Your computer is unable to keep up with Boodler's computation.
<li>Run fewer applications at the same time as Boodler.
<li>Try rebuilding Boodler using the 
<code>python configure.py --integer</code> configuration option.
This reduces the number of floating-point operations, at the cost
of less accurate volume fading.
<li>If you are using MacOSX, increase the number of sound buffers,
using the <code>--define buffercount=<em>count</em></code> option.
The default is 6; increasing it to 12 or 16 should help:
<pre>
python boodler.py --define buffercount=12 play.OneSound pure/stereotest.aiff
</pre>
<li>Get a beefier computer.
</ul>

<li>
You hear clipping noise (mild static) in some soundscapes.

<ul>
<li>You need to reduce the amplitude of Boodler's sound stream as it
passes through your drivers. There are two ways of doing this:
<li>Use a mixer application (such as <code>xmixer</code>,
<code>amixer</code>, or <code>alsamixer</code>) to reduce the 
"PCM" component of your sound driver. You can compensate
by turning up the "Master" component, or just turning up your speakers.
<li>Or, use the <code>--master</code> argument to Boodler, giving it a
master mixing volume <em>less</em> than the default of 0.5. 
Again, you can compensate with a mixer application or by turning up
your speakers.
</ul>

</ul>


<hr>
<em><a href="index.html">Return to Boodler docs index</a></em>

</body></html>
